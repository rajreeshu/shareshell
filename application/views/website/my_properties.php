<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SHARESHELL | My Properties</title>
    <meta name="shareshell" content="Making rental easy">
    <meta name="author" content="Kimarotec">
    <meta name="keyword" content="html5, css, bootstrap, property, real-estate theme , bootstrap template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800' rel='stylesheet' type='text/css'> -->

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<!--     <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/fontello.css">
    <link href="assets/fonts/icon-7-stroke/css/pe-icon-7-stroke.css" rel="stylesheet">
    <link href="assets/fonts/icon-7-stroke/css/helper.css" rel="stylesheet">
    <link href="assets/css/animate.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="assets/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/icheck.min_all.css">
    <link rel="stylesheet" href="assets/css/price-range.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/owl.theme.css">
    <link rel="stylesheet" href="assets/css/owl.transitions.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css"> -->
</head>
<?php
    $this->load->view('website/link_import');
    $this->load->view('website/header');
?> 
<style>
    #height{
        height: 150px;;
    }
</style>

<body>


    <!-- End of nav bar -->

    <div class="page-head">
        <div class="container">
            <div class="row">
                <div class="page-head-content">
                    <h1 class="page-title">SUBMITTED PROPERTIES</h1>
                </div>
            </div>
        </div>
    </div>
    <!-- End page header -->

    <!-- property area -->
    <div class="properties-area recent-property" style="background-color: rgb(255, 255, 255);">
        <div class="container">
            <div class="row">

                

                <div class="col-md-70  pr0 padding-top-40 properties-page">
                    <div class="col-md-12 clear">
                        <div class="col-xs-10 page-subheader sorting pl0">
                            <ul class="sort-by-list">
                                <li class="active">
                                    
                                </li>
                                
                            </ul>
                            <!--/ .sort-by-list-->

                            <div class="items-per-page">
                               
                               
                                <!--/ .sel-->
                            </div>
                            <!--/ .items-per-page-->
                        </div>

                        <div class="col-xs-2 layout-switcher">
                            <a class="layout-list" href="javascript:void(0);"> <i class="fa fa-th-list"></i> </a>
                             <a class="layout-grid active" href="javascript:void(0);"> <i class="fa fa-th"></i> </a>
                            
                        </div>
                        <!--/ .layout-switcher-->
                    </div>

                    <div class="col-md-22 clear layout">
                        <div id="list-type" class="proerty-th" >
                            
                            

                            <div class="col-sm-6 col-md-4 p0">
                                <div class="box-two proerty-item">
                                    <div class="item-thumb">
                                        <a href="property-1.html"><img src="assets/img/demo/property-3.jpg" id="height"></a>
                                    </div>

                                    <div class="item-entry overflow">
                                        <h5><a href="property-1.html"> Super nice villa </a></h5>
                                        <div class="dot-hr"></div>
                                        <span class="pull-left"><b> Area :</b> 120m </span>
                                        <span class="proerty-price pull-right"> $ 300,000</span>
                                        <p style="display: none;">Suspendisse ultricies Suspendisse ultricies Nulla quis
                                            dapibus nisl. Suspendisse ultricies commodo arcu nec pretium ...</p>
                                        <div class="property-icon">
                                            <img src="assets/img/icon/bed.png">(5)|
                                            <img src="assets/img/icon/shawer.png">(2)|
                                            <img src="assets/img/icon/cars.png">(1)
                                        </div>
                                        
                                        <div>
                                            <li><a><b style="color: rgb(228, 13, 13);">REMOVE PROPERTY</b></a>  </li>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6 col-md-4 p0">
                                <div class="box-two proerty-item">
                                    <div class="item-thumb">
                                        <a href="property-1.html"><img src="assets/img/demo/property-1.jpg" id="height"></a>
                                    </div>

                                    <div class="item-entry overflow">
                                        <h5><a href="property-1.html"> Super nice villa </a></h5>
                                        <div class="dot-hr"></div>
                                        <span class="pull-left"><b> Area :</b> 120m </span>
                                        <span class="proerty-price pull-right"> $ 300,000</span>
                                        <p style="display: none;">Suspendisse ultricies Suspendisse ultricies Nulla quis
                                            dapibus nisl. Suspendisse ultricies commodo arcu nec pretium ...</p>
                                        <div class="property-icon">
                                            <img src="assets/img/icon/bed.png">(5)|
                                            <img src="assets/img/icon/shawer.png">(2)|
                                            <img src="assets/img/icon/cars.png">(1)
                                        </div>
                                        <div>
                                            <li><a><b style="color: rgb(228, 13, 13);">REMOVE PROPERTY</b></a>  </li>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-6 col-md-4 p0">
                                <div class="box-two proerty-item">
                                    <div class="item-thumb">
                                        <a href="property-1.html"><img src="assets/img/demo/property-2.jpg" id="height"></a>
                                    </div>

                                    <div class="item-entry overflow">
                                        <h5><a href="property-1.html"> Super nice villa </a></h5>
                                        <div class="dot-hr"></div>
                                        <span class="pull-left"><b> Area :</b> 120m </span>
                                        <span class="proerty-price pull-right"> $ 300,000</span>
                                        <p style="display: none;">Suspendisse ultricies Suspendisse ultricies Nulla quis
                                            dapibus nisl. Suspendisse ultricies commodo arcu nec pretium ...</p>
                                        <div class="property-icon">
                                            <img src="assets/img/icon/bed.png">(5)|
                                            <img src="assets/img/icon/shawer.png">(2)|
                                            <img src="assets/img/icon/cars.png">(1)
                                        </div>
                                        <div>
                                            <li><a><b style="color: rgb(228, 13, 13);">REMOVE PROPERTY</b></a>  </li>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>

                 <!--    <div class="col-md-12">
                        <div class="pull-right">
                            <div class="pagination">
                                <ul>
                                    <li><a href="#">Prev</a></li>
                                    <li><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#">4</a></li>
                                    <li><a href="#">Next</a></li>
                                </ul>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>

<br><br><br>
<?php
    $this->load->view('website/footer');

    $this->load->view('website/js_import');
?>
<!--     <script src="assets/js/modernizr-2.6.2.min.js"></script>
    <script src="assets/js/jquery-1.10.2.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bootstrap-select.min.js"></script>
    <script src="assets/js/bootstrap-hover-dropdown.js"></script>
    <script src="assets/js/easypiechart.min.js"></script>
    <script src="assets/js/jquery.easypiechart.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/wow.js"></script>
    <script src="assets/js/icheck.min.js"></script>
    <script src="assets/js/price-range.js"></script>
    <script src="assets/js/main.js"></script> -->
</body>

<script type="text/javascript">

var key="<?php echo $this->security->get_csrf_hash(); ?>"; 
    
    console.log(key);

function load_page_content(page_no){

    var addon_array = [];
    
    $("input:checkbox[name=filter_addon]:checked").each(function() {
        addon_array.push($(this).val());
    });

    $.ajax({
        url:"<?=base_url('main_helper/my_property_data');?>",
        type:"POST",
        async:false,
        data:{
            "<?php echo $this->security->get_csrf_token_name();?>":key,
            user_id:"<?=$this->security->xss_clean($this->session->userdata('user_id_shareshell'));?>"
            // items_per_page:$("#items_per_page").val(),
            // page_no:page_no,
            // filter_avail:$("#filter_avail").val(),
            // filter_city:$("#filter_city").val(),
            // filter_status:$("#filter_status").val(),
            // filter_price:$("#price-range").val(),
            // filter_addon:addon_array,
            // filter_sort:sort_by,
            // filter_sort_by:sort_by_val
            },
            dataType:"json",

            success:function(data){
                key=data.key;

                console.log(data);
                var property_list="";
                var no_of_page="";
                var no_of_page_code="";

                no_of_page=Math.ceil(data.row_count/$("#items_per_page").val());
                console.log(no_of_page);

                $.each(data.data,function() {
                    
                    type_change="";
                    if(this.avail=="combined"){
                        type_change="All";
                    }else if(this.avail=="girl"){
                        type_change="F";
                    }else if(this.avail="boy"){
                        type_change="M";
                    }

                    property_list+='<div class="col-sm-6 col-md-4 p0">';
                    property_list+='<div class="box-two proerty-item">';
                    property_list+='<div class="item-thumb">';
                    property_list+='<a href="<?=base_url('property?id=');?>'+this.sn+'" ><img src="<?=base_url('utility/main_image');?>/'+this.main_image+'" style="height:225px;"></a>';
                    property_list+='</div>';
                    property_list+='<div class="item-entry overflow">';
                    property_list+='<h5><a href="property-1.html"> '+this.name.toUpperCase()+' </a></h5>';
                    property_list+='<div class="dot-hr"></div>';
                    property_list+='<span class="pull-left"><b>'+this.sn+' :- '+this.min_bed+' </b></span>';
                    property_list+='<span class="proerty-price pull-right"> &#8377 '+this.price+'</span>';
                    property_list+='<p style="display: none; overflow: hidden; text-overflow: ellipsis;max-height: 72px;-webkit-line-clamp: 2;">'+this.description+'</p>';
                    property_list+='<div class="property-icon">';
                    property_list+='<span style="font-size:22px;"><b> &#9893;</b></span><span style="text-transform: capitalize;"> ( '+type_change+' ) |</span>';
                    property_list+='<span style="font-size:22px;"><b> &#9963;</b></span><span style="text-transform: capitalize;"> ( '+this.type+' ) |</span>';
                    property_list+='<span style="font-size:22px;"><b> &#9983;</b></span><span style="text-transform: capitalize;"> ( '+this.status+' ) </span>';
                    property_list+= '<div style="margin-top:3px;"><a href="#" class="delete_property" data-propid='+this.sn+' onclick="remove_click('+this.sn+')"><b style="color: rgb(228, 13, 13);">REMOVE PROPERTY</b></a></div>';
                    property_list+='</div>';
                    property_list+='</div>';
                    property_list+='</div>';
                    property_list+='</div>';
                    // property__list+='';

                });

                var empty_property_list="";
                empty_property_list+="<center><div>";
                empty_property_list+="<h2>No Listed property Found</h2>";
                empty_property_list+="<br><a href=\"<?=base_url('main/submit_property');?>\" class=\"btn btn-default\">Post a new Property</a>";
                empty_property_list+="</div></center>";

                property_list=(property_list=="") ? empty_property_list:property_list;
                $("#list-type").html(property_list);
                // console.log(property_list);

                    // for(i=1;i<=no_of_page;i++){
                    //     if(i==page_no){
                    //         no_of_page_code+='<li><a href="#" class="pagination_box" onclick="load_page_content('+i+')">'+i+'</a></li>';
                    //     }else{
                    //         no_of_page_code+='<li><a href="#" onclick="load_page_content('+i+')">'+i+'</a></li>';    
                    //     }
                        
                    // }
                    // $("#pagination_pages").html(no_of_page_code);


            },
            error:function(data){
                console.log(data);
            }
        });
}

// console.log(key);
load_page_content(1);
// console.log(key);

function remove_click(sn){

    console.log(sn);
     if(confirm("Delete this Property?")) {
        
        $.ajax({
            url:"<?=base_url('main_helper/delete_property_byid');?>",
            type:"POST",
            async:false,
            data:{
                "<?php echo $this->security->get_csrf_token_name();?>":key,
                "property_id":sn
                },
                dataType:"json",
                success:function(data){
                    key=data.key;

                    load_page_content(1);
                    // console.log(data);
                    // return;


                    
                },
                error:function(data){
                    console.log(data);
                    // result=data;
                }
        });
    }

}

// $(".delete_property").click(function(e){
//     console.log("hh");
//     var prop_id=$(this).attr('data-propid');

//     if(confirm("Delete this Property?")) {
        
//         $.ajax({
//             url:"<?=base_url('main_helper/delete_property_byid');?>",
//             type:"POST",
//             async:false,
//             data:{
//                 "<?php echo $this->security->get_csrf_token_name();?>":key,
//                 "property_id":prop_id
//                 },
//                 dataType:"json",
//                 success:function(data){
//                     key=data.key;

//                     load_page_content(1);
//                     // console.log(data);
//                     // return;


                    
//                 },
//                 error:function(data){
//                     console.log(data);
//                     // result=data;
//                 }
//         });
//     }
    
// });


</script>

</html>